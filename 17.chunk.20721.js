webpackJsonp([17],{"1K8j":function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){return u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u.apply(this,arguments)}function i(t,e){if(null==t)return{};var n,o,r=a(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function a(t,e){if(null==t)return{};var n,o,r={},u=Object.keys(t);for(o=0;o<u.length;o++)n=u[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function l(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?h(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){return t>e&&t>j?"horizontal":e>t&&e>j?"vertical":""}function g(t,e){t.style.transform="translate3d(0, ".concat(e,"px, 0)"),t.style.msTransform="translate3d(0, ".concat(e,"px, 0)"),t.style.MozTransform="translate3d(0, ".concat(e,"px, 0)"),t.style.webkitTransform="translate3d(0, ".concat(e,"px, 0)")}function v(){return document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var m=n("EBst"),O=o(n("9qb7")),T=o(n("5D9O")),j=10,S=function(t){function e(){for(var t,n,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return n=l(this,(t=f(e)).call.apply(t,[this].concat(r))),y(h(n),"state",{status:"normal",height:0}),y(h(n),"pullrefresh",(0,m.createRef)()),y(h(n),"pullrefresh_loading",(0,m.createRef)()),y(h(n),"headHeight",50),y(h(n),"touchStart",function(t){n.resetTouchStatus(),n.startX=t.touches[0].clientX,n.startY=t.touches[0].clientY}),y(h(n),"touchMove",function(t){var e=t.touches[0];n.deltaX=e.clientX-n.startX,n.deltaY=e.clientY-n.startY,n.offsetX=Math.abs(n.deltaX),n.offsetY=Math.abs(n.deltaY),n.direction=n.direction||b(n.offsetX,n.offsetY)}),y(h(n),"resetTouchStatus",function(){n.direction="",n.deltaX=0,n.deltaY=0,n.offsetX=0,n.offsetY=0}),y(h(n),"onTouchStart",function(t){!n.untouchable()&&n.getCeiling()&&n.touchStart(t)}),y(h(n),"onTouchMove",function(t){n.untouchable()||(n.touchMove(t),!n.ceiling&&n.getCeiling()&&(n.startY=t.touches[0].clientY,n.deltaY=0),n.ceiling&&n.deltaY>=0&&"vertical"===n.direction&&(n.setStatus(n.ease(n.deltaY)),t.cancelable&&t.preventDefault()))}),y(h(n),"onTouchEnd",function(){!n.untouchable()&&n.ceiling&&n.deltaY&&("loosing"===n.state.status?(n.props.onRefresh&&n.props.onRefresh(),n.setStatus(n.headHeight,!0)):n.setStatus(0))}),n}return d(e,t),s(e,[{key:"componentDidMount",value:function(){if(this.pullrefresh){var t=this.pullrefresh.current;t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchEnd,!1)}}},{key:"componentWillUnmount",value:function(){if(this.pullrefresh){var t=this.pullrefresh.current;t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchEnd,!1)}}},{key:"untouchable",value:function(){return"loading"===this.state.status||"success"===this.state.status||this.props.disabled}},{key:"getCeiling",value:function(){return this.ceiling=0===v()}},{key:"componentWillReceiveProps",value:function(t){t.loading?this.setStatus(t.loading?this.headHeight:0,t.loading):this.setStatus(0)}},{key:"ease",value:function(t){var e=this.headHeight;return t<e?t:t<2*e?Math.round(e+(t-e)/2):t>1.5*e?1.5*e:Math.round(1.5*e+(t-2*e)/4)}},{key:"setStatus",value:function(t,e){g(this.pullrefresh_loading.current,t);var n=e?"loading":0===t?"normal":t<this.headHeight?"pulling":"loosing";n!==this.state.status&&this.setState({status:n})}},{key:"render",value:function(t){var e=t.prefix,n=t.className,o=t.children,r=i(t,["prefix","className","children"]);return(0,m.h)("div",u({className:(0,O.default)(e,n),ref:this.pullrefresh},r),(0,m.h)("span",{className:"".concat(e,"-loading"),ref:this.pullrefresh_loading}),o)}}]),e}(m.Component);y(S,"defaultProps",{prefix:"caf-pullref"}),y(S,"propTypes",{prefix:T.default.string,direction:T.default.oneOf(["up","down"]),distance:T.default.number,isRefreshing:T.default.bool,onRefresh:T.default.func.isRequired,indicator:T.default.shape({pulling:T.default.oneOfType([T.default.string,T.default.node]),loosing:T.default.oneOfType([T.default.string,T.default.node]),loading:T.default.oneOfType([T.default.string,T.default.node]),finish:T.default.oneOfType([T.default.string,T.default.node])})}),e.default=S},"2Kzc":function(){},"d8V+":function(t,e,n){n("2Kzc")},gATp:function(t,e,n){"use strict";function o(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",function(){return l});var i=n("d8V+"),a=(n.n(i),n("1K8j")),c=n.n(a),s=n("EBst"),l=(n.n(s),function(t){function e(){for(var e,n,o,u=arguments.length,i=Array(u),a=0;a<u;a++)i[a]=arguments[a];return e=n=r(this,t.call.apply(t,[this].concat(i))),n.state={count:1,loading:!1},n.onRefresh=function(){setTimeout(function(){console.log("刷新成功"),n.setState({loading:!1,count:n.state.count+1})},2e3)},o=e,r(n,o)}return u(e,t),e.prototype.render=function(t,e){var n=e.loading,r=e.count;return o(t),Object(s.h)(c.a,{loading:n,onRefresh:this.onRefresh},Object(s.h)("div",{class:"caf-demo-block",style:"min-height: 500px;"},"count: ",r))},e}(s.Component))}});