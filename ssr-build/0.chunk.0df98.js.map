{"version":3,"sources":["webpack:///./pages/components/notice-bar/style.scss?367b","webpack:///../components/notice-bar/index.jsx","webpack:///./pages/components/notice-bar/index.js"],"names":["NoticeBar","state","wrapWidth","offsetWidth","duration","isFirst","isShow","wrap","createRef","content","onAnimationEnd","setState","calcInfo","onRightClick","props","action","onClick","componentWillReceiveProps","nextProps","text","componentDidMount","scrollable","speed","current","getBoundingClientRect","width","render","prefix","className","icon","wrapable","delay","color","bgColor","restProps","barStyle","backgroundColor","contentStyle","paddingLeft","animationDelay","animationDuration","rightIcon","cx","Component","defaultProps","Page","console","log"],"mappings":"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","file":"0.chunk.0df98.js","sourcesContent":["// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/components/notice-bar/style.scss\n// module id = BlhD\n// module chunks = 0 26","import { Component, createRef } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Icon from '../icon';\n/**\n * 通知栏\n */\nclass NoticeBar extends Component {\n  static defaultProps = {\n    prefix: 'caf-noticebar',\n    scrollable: true,\n    wrapable: false,\n    icon: 'notice',\n    speed: 50,\n    delay: 1\n  };\n  static propTypes = {\n    /**\n     * 自定义前缀\n     */\n    prefix: PropTypes.string,\n    /**\n     * 消息内容\n     */\n    text: PropTypes.string,\n    /**\n     * 是否启用滚动\n     */\n    scrollable: PropTypes.bool,\n    /**\n     * 是否自动换行（仅在不滚动时生效）\n     */\n    wrapable: PropTypes.bool,\n    /**\n     * 文本颜色\n     */\n    color: PropTypes.string,\n    /**\n     * 背景颜色\n     */\n    bgColor: PropTypes.string,\n    /**\n     * 左侧图标，`string` 类型时显示指定图标， 为`false` 时不显示图标，为`true` 时显示默认图标\n     */\n    icon: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    /**\n     * 滚动速度\n     */\n    speed: PropTypes.number,\n    /**\n     * 滚动延迟\n     */\n    delay: PropTypes.number,\n    /**\n     * 点击类型\n     */\n    action: PropTypes.oneOfType([PropTypes.oneOf(['closable', 'link']), PropTypes.node , PropTypes.element])\n  };\n  state = {\n    wrapWidth: 0,\n    offsetWidth: 0,\n    duration: 0,\n    isFirst: true,\n    isShow: true\n  };\n  wrap = createRef();\n  content = createRef();\n  componentWillReceiveProps(nextProps) {\n    if (this.props.text !== nextProps.text) {\n      this.calcInfo();\n    }\n  }\n  onAnimationEnd = () => {\n    this.setState(\n      {\n        isFirst: false\n      },\n      () => {\n        this.calcInfo();\n      }\n    );\n  };\n  componentDidMount() {\n    this.calcInfo();\n  }\n  calcInfo() {\n    let { wrap, content } = this;\n    const { scrollable, speed } = this.props;\n    if (!wrap.current || !content.current) {\n      return;\n    }\n    wrap = wrap.current;\n    content = content.current;\n    const wrapWidth = wrap.getBoundingClientRect().width;\n    const offsetWidth = content.getBoundingClientRect().width;\n\n    if (scrollable && offsetWidth > wrapWidth) {\n      this.setState({\n        wrapWidth,\n        offsetWidth,\n        duration: offsetWidth / speed\n      });\n    }\n  }\n  onRightClick = () => {\n    if (this.props.action === 'closable') {\n      this.setState({\n        isShow: false\n      });\n    }\n    this.props.onClick && this.props.onClick();\n  };\n  render(\n    { prefix, className, text, icon, scrollable, wrapable, delay, color, bgColor, action, ...restProps },\n    { isFirst, duration, wrapWidth, isShow }\n  ) {\n    let barStyle = {};\n    if (color || bgColor) {\n      barStyle = {\n        color,\n        backgroundColor: bgColor\n      };\n    }\n    let contentStyle = {};\n    if (!wrapable) {\n      contentStyle = {\n        paddingLeft: isFirst ? 0 : wrapWidth + 'px',\n        animationDelay: (isFirst ? delay : 0) + 's',\n        animationDuration: duration + 's'\n      };\n    }\n    let rightIcon;\n    if (!!action) {\n      if (action === 'closable' || action === 'link') {\n        rightIcon = (\n          <span className={`${prefix}-action`} onClick={this.onRightClick}>\n            <Icon icon={action === 'closable' ? 'wrong' : 'arrow_right'} />\n          </span>\n        );\n      } else {\n        rightIcon = typeof(action) === 'string' ? <span className={`${prefix}-action`}>{action}</span> : action;\n      }\n    }\n\n    if (isShow) {\n      return (\n        <div\n          className={cx(prefix, className, {\n            [`${prefix}__wrapable`]: wrapable\n          })}\n          style={barStyle}\n          {...restProps}\n        >\n          {!!icon && <Icon icon={typeof icon === 'string' ? icon : 'notice'} />}\n          <div className={`${prefix}-wrapper`} ref={this.wrap}>\n            <p\n              className={cx(`${prefix}-content`, {\n                [`${prefix}-content__scroll`]: scrollable && !wrapable,\n                [`${prefix}-content__scroll__infinite`]: !isFirst && !wrapable,\n                [`${prefix}-content__ellipsis`]: !scrollable && !wrapable\n              })}\n              onAnimationend={this.onAnimationEnd}\n              onWebkitAnimationEnd={this.onAnimationEnd}\n              ref={this.content}\n              style={contentStyle}\n            >\n              {text}\n            </p>\n          </div>\n          {rightIcon}\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\nexport default NoticeBar;\n\n\n\n// WEBPACK FOOTER //\n// ../components/notice-bar/index.jsx","import { Component } from 'preact';\nimport { NoticeBar } from 'cafune';\nimport './style.scss';\nexport default class Page extends Component {\n  render() {\n    return (\n      <div class=\"caf-demo caf-demo__noticebar\">\n        <p>基础用法</p>\n        <NoticeBar text=\"通知内容通知内容通知内容通知内容通知内容通知内容通知内容\" />\n        <p>自定义图标</p>\n        <NoticeBar\n          icon={false}\n          text=\"禁用图标通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n        <NoticeBar\n          icon=\"more\"\n          text=\"自定义图标通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n        <p>禁止滚动</p>\n        <NoticeBar\n          scrollable={false}\n          text=\"通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n        <p>多行展示</p>\n        <NoticeBar\n          wrapable={true}\n          text=\"通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n        <p>自定义样式</p>\n        <NoticeBar\n          color=\"#fff\"\n          bgColor=\"#177cb0\"\n          icon=\"more\"\n          text=\"通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n        <p>自定义右侧</p>\n        <NoticeBar\n          action=\"closable\"\n          onClick={() => {\n            console.log('closed ');\n          }}\n          text=\"通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n        <NoticeBar\n          action=\"link\"\n          text=\"通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n        <NoticeBar\n          action=\"去看看\"\n          text=\"通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n        <NoticeBar\n          action={<span style=\"color: #88ada6;\">去看看</span>}\n          text=\"通知内容通知内容通知内容通知内容通知内容通知内容通知内容\"\n        />\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pages/components/notice-bar/index.js"],"sourceRoot":""}