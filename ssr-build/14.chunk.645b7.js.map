{"version":3,"sources":["webpack:///../components/stepper/index.jsx","webpack:///./pages/components/stepper/index.js"],"names":["Stepper","minus","props","onChange","value","step","min","disabled","result","plus","max","onInputChange","integerOnly","$target","e","target","tarVal","final","Math","round","console","log","render","prefix","className","readOnly","restProps","isReachMin","isReachMax","cx","Component","defaultProps","Infinity","StepperComp","state","val1","val2","val3","val4","changeHandler","setState","key","val"],"mappings":"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","file":"14.chunk.645b7.js","sourcesContent":["import { Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\n/**\n * 步进器\n */\nclass Stepper extends Component {\n  static defaultProps = {\n    prefix: 'caf-stepper',\n    step: 1,\n    disabled: false,\n    integerOnly: false,\n    readOnly: false,\n    min: 0,\n    max: Infinity\n  };\n  static propTypes = {\n    /**\n     * 自定义类名\n     */\n    prefix: PropTypes.string,\n    /**\n     * 当前值\n     */\n    value: PropTypes.number.isRequired,\n    /**\n     * 最小值\n     */\n    min: PropTypes.number,\n    /**\n     * 最大值\n     */\n    max: PropTypes.number,\n    /**\n     * 步进数\n     */\n\n    step: PropTypes.number,\n    /**\n     * 是否处于禁用状态\n     */\n    disabled: PropTypes.bool,\n    /**\n     * 是否限定为整数\n     */\n    integerOnly: PropTypes.bool,\n    /**\n     * 数值是否只读\n     */\n    readOnly: PropTypes.bool,\n    /**\n     * 数值改变时回调\n     */\n    onChange: PropTypes.func\n  };\n  minus = () => {\n    const { onChange, value, step, min, disabled } = this.props;\n    if (value != min && !disabled) {\n      const result = value - step <= min ? min : value - step;\n      onChange(result, -1);\n    }\n  };\n  plus = () => {\n    const { onChange, value, step, max, disabled } = this.props;\n    if (value != max && !disabled) {\n      const result = value + step >= max ? max : value + step;\n      onChange(result, -1);\n    }\n  };\n  onInputChange = e => {\n    const { value, min, max, integerOnly, onChange } = this.props;\n    const $target = e.target;\n    const tarVal = $target.value;\n    let final;\n    if (tarVal != +tarVal) {\n      final = value;\n    } else {\n      if (+tarVal > max) final = max;\n      if (+tarVal < min) final = min;\n      if (integerOnly && +tarVal % 1 !== 0) final = Math.round(tarVal);\n    }\n    if (final && final !== tarVal) {\n      console.log(final);\n      $target.value = final;\n    }\n    onChange($target.value, 0);\n  };\n  render({ prefix, className, disabled, step, min, max, value, readOnly, ...restProps }) {\n    const isReachMin = value - step < min || value === min;\n    const isReachMax = value + step > max || value === max;\n    return (\n      <div className={cx(prefix, className)} {...restProps}>\n        <span\n          className={cx(`${prefix}-btn`, `${prefix}-btn__minus`, {\n            [`${prefix}-btn__disabled`]: disabled || isReachMin\n          })}\n          onClick={this.minus}\n        />\n        <div\n          className={cx(`${prefix}-input`, {\n            [`${prefix}-input__disabled`]: disabled\n          })}\n        >\n          {readOnly ? (\n            <p className={`${prefix}-input-content`}>{value}</p>\n          ) : (\n            <input\n              aria-valuemin={min}\n              aria-valuemax={max}\n              disabled={disabled}\n              aria-valuenow={value}\n              value={value}\n              onKeyUp={this.onInputChange}\n            />\n          )}\n        </div>\n        <span\n          className={cx(`${prefix}-btn`, `${prefix}-btn__plus`, {\n            [`${prefix}-btn__disabled`]: disabled || isReachMax\n          })}\n          onClick={this.plus}\n        />\n      </div>\n    );\n  }\n}\nexport default Stepper;\n\n\n\n// WEBPACK FOOTER //\n// ../components/stepper/index.jsx","import { Stepper, Cell } from 'cafune';\nimport { Component } from 'preact';\nexport default class StepperComp extends Component {\n  state = {\n    val1: 1,\n    val2: 1,\n    val3: 4,\n    val4: 1\n  };\n  changeHandler = key => {\n    return val => {\n      this.setState({\n        [key]: val\n      });\n    };\n  };\n  render({}, { val1, val2, val3, val4 }) {\n    return (\n      <div>\n        <Cell\n          title=\"基础用法\"\n          value={<Stepper value={val1} onChange={this.changeHandler('val1')} />}\n          middle\n        />\n        <Cell\n          title=\"自定义步进\"\n          value={\n            <Stepper\n              value={val2}\n              step={3}\n              onChange={this.changeHandler('val2')}\n            />\n          }\n          middle\n        />\n        <Cell\n          title=\"禁用状态\"\n          value={\n            <Stepper\n              value={val2}\n              step={3}\n              disabled\n              onChange={this.changeHandler('val2')}\n            />\n          }\n          middle\n        />\n        <Cell\n          title=\"限定范围(2-8)\"\n          value={\n            <Stepper\n              value={val3}\n              min={2}\n              max={8}\n              onChange={this.changeHandler('val3')}\n            />\n          }\n          middle\n        />\n        <Cell\n          title=\"限定整数\"\n          value={\n            <Stepper\n              value={val4}\n              min={-Infinity}\n              integerOnly\n              onChange={this.changeHandler('val4')}\n            />\n          }\n          middle\n        />\n        <Cell\n          title=\"只读\"\n          value={\n            <Stepper\n              value={val4}\n              readOnly\n              onChange={this.changeHandler('val4')}\n            />\n          }\n          middle\n        />\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pages/components/stepper/index.js"],"sourceRoot":""}