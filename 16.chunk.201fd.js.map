{"version":3,"sources":["webpack:///16.chunk.201fd.js","webpack:///../components/search-bar/index.jsx","webpack:///./pages/components/search-bar/index.js"],"names":["webpackJsonp","qlsu","module","__webpack_exports__","__webpack_require__","_objectWithoutProperties","obj","keys","target","i","indexOf","Object","prototype","hasOwnProperty","call","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","onNextFrame","cb","window","requestAnimationFrame","setTimeout","clearNextFrameAction","nextFrameId","cancelAnimationFrame","clearTimeout","_objectDestructuringEmpty","search_bar__classCallCheck","instance","Constructor","search_bar__possibleConstructorReturn","search_bar__inherits","defineProperty","_class","_temp","search_bar__initialiseProps","preact_min","classnames","classnames_default","n","icon","_extends","assign","arguments","length","source","key","actionDefault","confirm","text","keepShow","cancel","custom","SearchBar","_Component","props","_this","this","state","focus","componentWillReceiveProps","nextProps","setState","componentDidMount","componentDidUpdate","actionRef","current","action","type","$actionBtn","actionStyle","getComputedStyle","actionSize","offsetWidth","parseInt","marginLeft","style","componentWillUnmount","onBlurTimeout","render","_ref","_ref2","_cx","_this2","prefix","className","placeholder","maxLength","leftIcon","restProps","isBtnHide","cx","onSubmit","onConfirm","onChange","onFocus","onBlur","ref","inputRef","onClick","onCancel","marginRight","Component","defaultProps","align","_this3","clear","e","preventDefault","val","blurFromOnClear","document","activeElement","createRef","formRef","d","search_bar_SearchBarComp","_ref3","class","search_bar","_ref4","_ref5","_ref6","SearchBarComp","_ret","_len","args","Array","_key","apply","concat","focusInput","inpRef","alert","console","log","c"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YAyBA,SAASC,GAAyBC,EAAKC,GAAQ,GAAIC,KAAa,KAAK,GAAIC,KAAKH,GAAWC,EAAKG,QAAQD,IAAM,GAAkBE,OAAOC,UAAUC,eAAeC,KAAKR,EAAKG,KAAcD,EAAOC,GAAKH,EAAIG,GAAM,OAAOD,GAInN,QAASO,GAA2BC,EAAMF,GAAQ,IAAKE,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOH,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BE,EAAPF,EAElO,QAASI,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIC,WAAU,iEAAoED,GAAeD,GAASP,UAAYD,OAAOW,OAAOF,GAAcA,EAAWR,WAAaW,aAAeC,MAAOL,EAAUM,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeP,IAAYT,OAAOiB,eAAiBjB,OAAOiB,eAAeT,EAAUC,GAAcD,EAASU,UAAYT,GCjBje,QAASU,GAAYC,GACnB,MAAIC,QAAOC,sBACFD,OAAOC,sBAAsBF,GAE/BC,OAAOE,WAAWH,EAAI,GAE/B,QAASI,GAAqBC,GACxBJ,OAAOK,qBACTL,OAAOK,qBAAqBD,GAE5BJ,OAAOM,aAAaF,GDoPxB,QAASG,GAA0BjC,GAAO,GAAW,MAAPA,EAAa,KAAM,IAAIe,WAAU,gCAE/E,QAASmB,GAA2BC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIrB,WAAU,qCAE3H,QAASsB,GAAsC3B,EAAMF,GAAQ,IAAKE,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOH,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BE,EAAPF,EAE7O,QAAS8B,GAAqBzB,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIC,WAAU,iEAAoED,GAAeD,GAASP,UAAYD,OAAOW,OAAOF,GAAcA,EAAWR,WAAaW,aAAeC,MAAOL,EAAUM,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeP,IAAYT,OAAOiB,eAAiBjB,OAAOiB,eAAeT,EAAUC,GAAcD,EAASU,UAAYT,GAjR5eT,OAAOkC,eAAe1C,EAAqB,cAAgBqB,OAAO,GAGlE,IAiBIsB,GAAQC,EAAOC,EAjBfC,EAAa7C,EAAoB,QAQjC8C,GAJa9C,EAAoB,QAIpBA,EAAoB,SACjC+C,EAAkC/C,EAAoBgD,EAAEF,GAGxDG,EAAOjD,EAAoB,QAG3BkD,EAAW3C,OAAO4C,QAAU,SAAU/C,GAAU,IAAK,GAAIC,GAAI,EAAGA,EAAI+C,UAAUC,OAAQhD,IAAK,CAAE,GAAIiD,GAASF,UAAU/C,EAAI,KAAK,GAAIkD,KAAOD,GAAc/C,OAAOC,UAAUC,eAAeC,KAAK4C,EAAQC,KAAQnD,EAAOmD,GAAOD,EAAOC,IAAY,MAAOnD,ICnBjPoD,GACJC,SACEC,KAAM,KACNC,UAAU,GAEZC,QACEF,KAAM,KACNC,UAAU,GAEZE,QACEH,KAAM,KACNC,UAAU,IAoBRG,GDsCsBnB,EAAQD,EAAS,SAAUqB,GCmCrD,QAAAD,GAAYE,GAAO,GAAAC,GAAAtD,EAAAuD,KACjBH,EAAArD,KAAAwD,KAAMF,GADW,OAAApB,GAAAlC,KAAAuD,GAGjBA,EAAKE,OACH/C,MAFY4C,EAAM5C,OAAS,GAG3BgD,OAAO,GALQH,EDgFnB,MAlHAnD,GAAUgD,EAAWC,GAiBrBD,EAAUtD,UCyBV6D,0BDzBgD,SCyBtBC,GACpB,SAAWA,IAAaA,EAAUlD,QAAU8C,KAAKC,MAAM/C,OACzD8C,KAAKK,UACHnD,MAAOkD,EAAUlD,SDpBvB0C,EAAUtD,UCyBVgE,kBDzBwC,WC0BtCN,KAAKO,sBDtBPX,EAAUtD,UCwBViE,mBDxByC,WCyBvC,GAAIP,KAAKQ,WAAaR,KAAKQ,UAAUC,QAAS,IACtCC,GAAWV,KAAKF,MAAhBY,MACNA,GAAS1B,KAAkBM,EAAcoB,EAAOC,MAAOD,EAFX,IAGpCR,GAAUF,KAAKC,MAAfC,KACR,KAAKQ,EAAOjB,WAAaS,EAAO,CAC9B,GAAMU,GAAaZ,KAAKQ,UAAUC,QAC5BI,EAAcnD,OAAOoD,iBAAiBF,GACtCG,EACJH,EAAWI,YAAcC,SAASJ,EAAYK,WAAY,GAC5DN,GAAWO,MAAX,kBAAqC,EAAIJ,EAAzC,KACAf,KAAKe,WAAaA,KDlBxBnB,EAAUtD,UCuBV8E,qBDvB2C,WCwBrCpB,KAAKqB,gBACPxD,EAAqBmC,KAAKqB,eAC1BrB,KAAKqB,cAAgB,ODnBzBzB,EAAUtD,UCiFVgF,ODjF6B,SAAgBC,EAAMC,GCoFjD,GAAAC,GAAAC,EAAA1B,KADE9C,EACFsE,EADEtE,MAAOgD,EACTsB,EADStB,MADPyB,EAEFJ,EAFEI,OAAQC,EAEVL,EAFUK,UAAWC,EAErBN,EAFqBM,YAAaC,EAElCP,EAFkCO,UAAWpB,EAE7Ca,EAF6Cb,OAAQqB,EAErDR,EAFqDQ,SAAaC,EAElEjG,EAAAwF,GAAA,qEACIU,GAAY,CAKhB,OAJIvB,KACFA,EAAS1B,KAAkBM,EAAcoB,EAAOC,MAAOD,GACvDuB,GAAavB,EAAOjB,WAAaS,GAGjC7D,OAAAsC,EAAA,UAAAK,GACE4C,UAAWM,IAAGP,EAAQC,GACtBO,SAAUnC,KAAKoC,WACXJ,GAEJ3F,OAAAsC,EAAA,UAAKiD,UAAcD,EAAd,UACHtF,OAAAsC,EAAA,GAACI,EAAA,GAAKA,KAAMgD,IACZ1F,OAAAsC,EAAA,YACEgC,KAAK,SACLkB,YAAaA,EACb3E,MAAOA,EACP4E,UAAWA,EACXO,SAAUrC,KAAKqC,SACfC,QAAStC,KAAKsC,QACdC,OAAQvC,KAAKuC,OACbC,IAAKxC,KAAKyC,cAGX/B,GACDrE,OAAAsC,EAAA,UACEiD,UAAWM,IAAMP,EAAN,WAAAF,OACLE,EADK,iBACmBM,EADnBR,IAGXiB,QAAS,WACa,WAAhBhC,EAAOC,KACTe,EAAKiB,WACoB,YAAhBjC,EAAOC,MAChBe,EAAKU,YAEP1B,EAAOgC,WAETvB,OAASyB,YAAaX,GAAkC,EAAnBjC,KAAKe,WAApB,KAA0C,GAChEyB,IAAKxC,KAAKQ,WAETE,EAAOlB,QDhEXI,GCzJeiD,aD0JIrE,ECzJnBsE,cACLnB,OAAQ,aACRoB,MAAO,SACPhB,SAAU,UD0JXrD,EAA8B,WAC/B,GAAIsE,GAAShD,IAEbA,MCzEAe,WAAa,ED2Ebf,KCjDAiD,MAAQ,WACA,SAAWD,GAAKlD,OACpBkD,EAAK3C,UAAWnD,MAAO,KAErB8F,EAAKlD,MAAMuC,UACbW,EAAKlD,MAAMuC,SAAS,KDqDxBrC,KClDAqC,SAAW,SAAAa,GACT,GAAMhG,GAAQgG,EAAEhH,OAAOgB,KACjB,UAAW8F,GAAKlD,OACpBkD,EAAK3C,UAAWnD,UAEd8F,EAAKlD,MAAMuC,UACbW,EAAKlD,MAAMuC,SAASnF,IDsDxB8C,KCnDAoC,UAAY,SAAAc,GACVA,GAAKA,EAAEC,gBACP,IAAIC,GAAM,EAERA,GADGJ,EAAKP,UAAYO,EAAKP,SAAShC,QAC5BuC,EAAKP,SAAShC,QAAQvD,MAEtB8F,EAAK/C,MAAM/C,MAEnB8F,EAAKlD,MAAMsC,WAAaY,EAAKlD,MAAMsC,UAAUgB,IDsD/CpD,KCpDA2C,SAAW,WACLK,EAAKlD,MAAM6C,SACbK,EAAKlD,MAAM6C,SAASK,EAAK/C,MAAM/C,OAAS,IAExC8F,EAAKC,SDwDTjD,KCrDAsC,QAAU,WACRU,EAAK3C,UACHH,OAAO,KDyDXF,KCtDAuC,OAAS,WACPS,EAAK3B,cAAgB7D,EAAY,WAC1BwF,EAAKK,iBACJC,SAASC,gBAAkBP,EAAKP,UAClCO,EAAK3C,UACHH,OAAO,IAIb8C,EAAKK,iBAAkB,KD0D3BrD,KCvDAE,MAAQ,WACF8C,EAAKP,UAAYO,EAAKP,SAAShC,SACjCuC,EAAKP,SAAShC,QAAQP,SD2D1BF,KCxDAyC,SAAWe,sBDyDXxD,KCxDAQ,UAAYgD,sBDyDZxD,KCxDAyD,QAAUD,uBDyDT/E,GCLYmB,GDSgB9D,GAAoB4H,EAAE7H,EAAqB,UAAW,WAAa,MAAO8H,IAczG,IAAIC,GE/QIvH,OAAAsC,EAAA,cACEtC,OAAAsC,EAAA,QAAGkF,MAAM,kBAAT,QACAxH,OAAAsC,EAAA,GAAAmF,GAAWjC,YAAY,YFwR7BkC,EErRM1H,OAAAsC,EAAA,QAAGkF,MAAM,kBAAT,QF2RNG,EEnRM3H,OAAAsC,EAAA,QAAGkF,MAAM,kBAAT,QFyRNI,EEjRM5H,OAAAsC,EAAA,QAAGkF,MAAM,kBAAT,UA/BWK,EFsTU,SAAUrE,GAGvC,QAASqE,KACP,GAAIzF,GAAOsB,EAAOoE,CAElBjG,GAA2B8B,KAAMkE,EAEjC,KAAK,GAAIE,GAAOlF,UAAUC,OAAQkF,EAAOC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC3EF,EAAKE,GAAQrF,UAAUqF,EAGzB,OAAe9F,GAASsB,EAAQ1B,EAAsC2B,KAAMH,EAAWrD,KAAKgI,MAAM3E,GAAaG,MAAMyE,OAAOJ,KAAiBtE,EEjU/IE,OACEmD,IAAK,OFkUFrD,EEhUL2E,WAAa,WACX3E,EAAK4E,OAAOzE,SF6TLiE,EAIJ1F,EAAQJ,EAAsC0B,EAAOoE,GA2G1D,MA1HA7F,GAAqB4F,EAAerE,GAkBpCqE,EAAc5H,UElUdgF,OFkUiC,SAAgBC,EAAMC,GElUnC,GAAAE,GAAA1B,KAAPoD,EAAO5B,EAAP4B,GACX,OADkBnF,GAAAsD,GAEhBlF,OAAAsC,EAAA,cAAAiF,EAKEvH,OAAAsC,EAAA,cAAAoF,EAEE1H,OAAAsC,EAAA,GAAAmF,GACEjC,YAAY,SACZ3E,MAAOkG,EACPf,SAAU,SAAAe,GAAA,MAAO1B,GAAKrB,UAAW+C,YAGrC/G,OAAAsC,EAAA,cAAAqF,EAEE3H,OAAAsC,EAAA,GAAAmF,GACEjC,YAAY,SACZO,UAAW,SAAAgB,GAAA,MAAOwB,iBAAgBxB,IAClCf,SAAU,SAAAe,GAAA,MAAOyB,SAAQC,IAAI1B,OAGjC/G,OAAAsC,EAAA,cAAAsF,EAEE5H,OAAAsC,EAAA,GAAAmF,GACEjC,YAAY,SACZO,UAAW,iBAAMwC,OAAM,OACvBjC,SAAU,iBAAMiC,OAAM,OACtBlE,QACEC,KAAM,SACN+B,QAFM,WAGJmC,QAAQC,IAAI,qBAIlBzI,OAAAsC,EAAA,GAAAmF,GACEjC,YAAY,SACZO,UAAW,SAAAgB,GAAA,MAAOwB,OAAMxB,IACxBT,SAAU,iBAAMiC,OAAM,OACtBlE,QACEC,KAAM,UACN+B,QAFM,WAGJmC,QAAQC,IAAI,sBAIlBzI,OAAAsC,EAAA,GAAAmF,GACEjC,YAAY,SACZO,UAAW,iBAAMwC,OAAM,OACvBjC,SAAU,iBAAMiC,OAAM,OACtBlE,QACEC,KAAM,SACNnB,KAAM,OACNC,UAAU,EACViD,QAJM,WAKJkC,MAAM,aAKdvI,OAAAsC,EAAA,cACEtC,OAAAsC,EAAA,QAAGkF,MAAM,iBAAiBnB,QAAS1C,KAAK0E,YAAxC,QAGArI,OAAAsC,EAAA,GAAAmF,GAAWjC,YAAY,SAASW,IAAK,SAAAuC,GAAA,MAAMrD,GAAKiD,OAASI,QFyW1Db,GEjbkCrB","file":"16.chunk.201fd.js","sourcesContent":["webpackJsonp([16],{\n\n/***/ \"qlsu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"EBst\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// EXTERNAL MODULE: ../node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(\"5D9O\");\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: ../node_modules/classnames/index.js\nvar classnames = __webpack_require__(\"9qb7\");\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ../components/icon/index.jsx\nvar icon = __webpack_require__(\"zHj6\");\n\n// CONCATENATED MODULE: ../components/search-bar/index.jsx\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _class, _temp, search_bar__initialiseProps;\n\n\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar actionDefault = {\n  confirm: {\n    text: '搜索',\n    keepShow: true\n  },\n  cancel: {\n    text: '取消',\n    keepShow: false\n  },\n  custom: {\n    text: '确定',\n    keepShow: true\n  }\n};\nfunction onNextFrame(cb) {\n  if (window.requestAnimationFrame) {\n    return window.requestAnimationFrame(cb);\n  }\n  return window.setTimeout(cb, 1);\n}\nfunction clearNextFrameAction(nextFrameId) {\n  if (window.cancelAnimationFrame) {\n    window.cancelAnimationFrame(nextFrameId);\n  } else {\n    window.clearTimeout(nextFrameId);\n  }\n}\n\n/**\n * 搜索栏\n */\nvar search_bar_SearchBar = (_temp = _class = function (_Component) {\n  _inherits(SearchBar, _Component);\n\n  function SearchBar(props) {\n    _classCallCheck(this, SearchBar);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    search_bar__initialiseProps.call(_this);\n\n    var value = props.value || '';\n    _this.state = {\n      value: value,\n      focus: false\n    };\n    return _this;\n  }\n\n  SearchBar.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if ('value' in nextProps && nextProps.value !== this.state.value) {\n      this.setState({\n        value: nextProps.value\n      });\n    }\n  };\n\n  SearchBar.prototype.componentDidMount = function componentDidMount() {\n    this.componentDidUpdate();\n  };\n\n  SearchBar.prototype.componentDidUpdate = function componentDidUpdate() {\n    if (this.actionRef && this.actionRef.current) {\n      var action = this.props.action;\n\n      action = _extends({}, actionDefault[action.type], action);\n      var focus = this.state.focus;\n\n      if (!action.keepShow && !focus) {\n        var $actionBtn = this.actionRef.current;\n        var actionStyle = window.getComputedStyle($actionBtn);\n        var actionSize = $actionBtn.offsetWidth + parseInt(actionStyle.marginLeft, 10);\n        $actionBtn.style = 'margin-right: ' + -1 * actionSize + 'px';\n        this.actionSize = actionSize;\n      }\n    }\n  };\n\n  SearchBar.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.onBlurTimeout) {\n      clearNextFrameAction(this.onBlurTimeout);\n      this.onBlurTimeout = null;\n    }\n  };\n\n  SearchBar.prototype.render = function render(_ref, _ref2) {\n    var _cx,\n        _this2 = this;\n\n    var value = _ref2.value,\n        focus = _ref2.focus;\n\n    var prefix = _ref.prefix,\n        className = _ref.className,\n        placeholder = _ref.placeholder,\n        maxLength = _ref.maxLength,\n        action = _ref.action,\n        leftIcon = _ref.leftIcon,\n        restProps = _objectWithoutProperties(_ref, ['prefix', 'className', 'placeholder', 'maxLength', 'action', 'leftIcon']);\n\n    var isBtnHide = false;\n    if (action) {\n      action = _extends({}, actionDefault[action.type], action);\n      isBtnHide = !action.keepShow && !focus;\n    }\n    return Object(preact_min[\"h\"])(\n      'form',\n      _extends({\n        className: classnames_default()(prefix, className),\n        onSubmit: this.onConfirm\n      }, restProps),\n      Object(preact_min[\"h\"])(\n        'div',\n        { className: prefix + '-input' },\n        Object(preact_min[\"h\"])(icon[\"a\" /* default */], { icon: leftIcon }),\n        Object(preact_min[\"h\"])('input', {\n          type: 'search',\n          placeholder: placeholder,\n          value: value,\n          maxLength: maxLength,\n          onChange: this.onChange,\n          onFocus: this.onFocus,\n          onBlur: this.onBlur,\n          ref: this.inputRef\n        })\n      ),\n      !!action && Object(preact_min[\"h\"])(\n        'div',\n        {\n          className: classnames_default()(prefix + '-action', (_cx = {}, _cx[prefix + '-action__hide'] = isBtnHide, _cx)),\n          onClick: function onClick() {\n            if (action.type === 'cancel') {\n              _this2.onCancel();\n            } else if (action.type === 'confirm') {\n              _this2.onConfirm();\n            }\n            action.onClick();\n          },\n          style: { marginRight: isBtnHide ? this.actionSize * -1 + 'px' : 0 },\n          ref: this.actionRef\n        },\n        action.text\n      )\n    );\n  };\n\n  return SearchBar;\n}(preact_min[\"Component\"]), _class.defaultProps = {\n  prefix: 'caf-search',\n  align: 'center',\n  leftIcon: 'search'\n}, search_bar__initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.actionSize = 0;\n\n  this.clear = function () {\n    if (!('value' in _this3.props)) {\n      _this3.setState({ value: '' });\n    }\n    if (_this3.props.onChange) {\n      _this3.props.onChange('');\n    }\n  };\n\n  this.onChange = function (e) {\n    var value = e.target.value;\n    if (!('value' in _this3.props)) {\n      _this3.setState({ value: value });\n    }\n    if (_this3.props.onChange) {\n      _this3.props.onChange(value);\n    }\n  };\n\n  this.onConfirm = function (e) {\n    e && e.preventDefault();\n    var val = '';\n    if (_this3.inputRef && _this3.inputRef.current) {\n      val = _this3.inputRef.current.value;\n    } else {\n      val = _this3.state.value;\n    }\n    _this3.props.onConfirm && _this3.props.onConfirm(val);\n  };\n\n  this.onCancel = function () {\n    if (_this3.props.onCancel) {\n      _this3.props.onCancel(_this3.state.value || '');\n    } else {\n      _this3.clear();\n    }\n  };\n\n  this.onFocus = function () {\n    _this3.setState({\n      focus: true\n    });\n  };\n\n  this.onBlur = function () {\n    _this3.onBlurTimeout = onNextFrame(function () {\n      if (!_this3.blurFromOnClear) {\n        if (document.activeElement !== _this3.inputRef) {\n          _this3.setState({\n            focus: false\n          });\n        }\n      }\n      _this3.blurFromOnClear = false;\n    });\n  };\n\n  this.focus = function () {\n    if (_this3.inputRef && _this3.inputRef.current) {\n      _this3.inputRef.current.focus();\n    }\n  };\n\n  this.inputRef = Object(preact_min[\"createRef\"])();\n  this.actionRef = Object(preact_min[\"createRef\"])();\n  this.formRef = Object(preact_min[\"createRef\"])();\n}, _temp);\n\n/* harmony default export */ var search_bar = (search_bar_SearchBar);\n// CONCATENATED MODULE: ./pages/components/search-bar/index.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return search_bar_SearchBarComp; });\n\n\n\nfunction _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError(\"Cannot destructure undefined\"); }\n\nfunction search_bar__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction search_bar__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction search_bar__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar _ref3 = Object(preact_min[\"h\"])(\n  'div',\n  null,\n  Object(preact_min[\"h\"])(\n    'p',\n    { 'class': 'caf-demo-title' },\n    '\\u9ED8\\u8BA4\\u7528\\u6CD5'\n  ),\n  Object(preact_min[\"h\"])(search_bar, { placeholder: '\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u8BCD' })\n);\n\nvar _ref4 = Object(preact_min[\"h\"])(\n  'p',\n  { 'class': 'caf-demo-title' },\n  '\\u81EA\\u5B9A\\u4E49\\u503C'\n);\n\nvar _ref5 = Object(preact_min[\"h\"])(\n  'p',\n  { 'class': 'caf-demo-title' },\n  '\\u8BBE\\u7F6E\\u56DE\\u8C03'\n);\n\nvar _ref6 = Object(preact_min[\"h\"])(\n  'p',\n  { 'class': 'caf-demo-title' },\n  '\\u5B9A\\u4E49\\u53F3\\u4FA7\\u6309\\u94AE'\n);\n\nvar search_bar_SearchBarComp = function (_Component) {\n  search_bar__inherits(SearchBarComp, _Component);\n\n  function SearchBarComp() {\n    var _temp, _this, _ret;\n\n    search_bar__classCallCheck(this, SearchBarComp);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = search_bar__possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      val: '关键词'\n    }, _this.focusInput = function () {\n      _this.inpRef.focus();\n    }, _temp), search_bar__possibleConstructorReturn(_this, _ret);\n  }\n\n  SearchBarComp.prototype.render = function render(_ref, _ref2) {\n    var _this2 = this;\n\n    var val = _ref2.val;\n\n    _objectDestructuringEmpty(_ref);\n\n    return Object(preact_min[\"h\"])(\n      'div',\n      null,\n      _ref3,\n      Object(preact_min[\"h\"])(\n        'div',\n        null,\n        _ref4,\n        Object(preact_min[\"h\"])(search_bar, {\n          placeholder: '\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u8BCD',\n          value: val,\n          onChange: function onChange(val) {\n            return _this2.setState({ val: val });\n          }\n        })\n      ),\n      Object(preact_min[\"h\"])(\n        'div',\n        null,\n        _ref5,\n        Object(preact_min[\"h\"])(search_bar, {\n          placeholder: '\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u8BCD',\n          onConfirm: function onConfirm(val) {\n            return alert('\\u786E\\u8BA4\\uFF0C\\u8F93\\u5165\\u503C\\u4E3A' + val);\n          },\n          onChange: function onChange(val) {\n            return console.log(val);\n          }\n        })\n      ),\n      Object(preact_min[\"h\"])(\n        'div',\n        null,\n        _ref6,\n        Object(preact_min[\"h\"])(search_bar, {\n          placeholder: '\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u8BCD',\n          onConfirm: function onConfirm() {\n            return alert('确认');\n          },\n          onCancel: function onCancel() {\n            return alert('取消');\n          },\n          action: {\n            type: 'cancel',\n            onClick: function onClick() {\n              console.log('action cancel');\n            }\n          }\n        }),\n        Object(preact_min[\"h\"])(search_bar, {\n          placeholder: '\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u8BCD',\n          onConfirm: function onConfirm(val) {\n            return alert(val);\n          },\n          onCancel: function onCancel() {\n            return alert('取消');\n          },\n          action: {\n            type: 'confirm',\n            onClick: function onClick() {\n              console.log('action confirm');\n            }\n          }\n        }),\n        Object(preact_min[\"h\"])(search_bar, {\n          placeholder: '\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u8BCD',\n          onConfirm: function onConfirm() {\n            return alert('确认');\n          },\n          onCancel: function onCancel() {\n            return alert('取消');\n          },\n          action: {\n            type: 'custom',\n            text: '试试手气',\n            keepShow: false,\n            onClick: function onClick() {\n              alert('试试手气');\n            }\n          }\n        })\n      ),\n      Object(preact_min[\"h\"])(\n        'div',\n        null,\n        Object(preact_min[\"h\"])(\n          'p',\n          { 'class': 'caf-demo-title', onClick: this.focusInput },\n          '\\u70B9\\u51FB\\u805A\\u7126'\n        ),\n        Object(preact_min[\"h\"])(search_bar, { placeholder: '\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u8BCD', ref: function ref(c) {\n            return _this2.inpRef = c;\n          } })\n      )\n    );\n  };\n\n  return SearchBarComp;\n}(preact_min[\"Component\"]);\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 16.chunk.201fd.js","import { Component, createRef } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Icon from '../icon';\n\nconst actionDefault = {\n  confirm: {\n    text: '搜索',\n    keepShow: true\n  },\n  cancel: {\n    text: '取消',\n    keepShow: false\n  },\n  custom: {\n    text: '确定',\n    keepShow: true\n  }\n};\nfunction onNextFrame(cb) {\n  if (window.requestAnimationFrame) {\n    return window.requestAnimationFrame(cb);\n  }\n  return window.setTimeout(cb, 1);\n}\nfunction clearNextFrameAction(nextFrameId) {\n  if (window.cancelAnimationFrame) {\n    window.cancelAnimationFrame(nextFrameId);\n  } else {\n    window.clearTimeout(nextFrameId);\n  }\n}\n\n/**\n * 搜索栏\n */\nclass SearchBar extends Component {\n  static defaultProps = {\n    prefix: 'caf-search',\n    align: 'center',\n    leftIcon: 'search'\n  };\n  static propTypes = {\n    /**\n     * 自定义类名\n     */\n    prefix: PropTypes.string,\n    /**\n     * 搜索框的\n     */\n    /**\n     * 占位文字\n     */\n    placeholder: PropTypes.string,\n    /**\n     * 最多可允许输入字符个数\n     */\n    maxLength: PropTypes.number,\n    /**\n     * 确定搜索时回调，支持`enter` 触发\n     */\n    onConfirm: PropTypes.func,\n    /**\n     * 取消操作时回调\n     */\n    onCancel: PropTypes.func,\n    /**\n     * 内容变更时回调\n     */\n    onChange: PropTypes.func,\n    /**\n     * 左侧按钮图标（参考 `Icon` 组件）\n     */\n    leftIcon: PropTypes.string,\n    /**\n     * 搜索框右侧附加功能\n     */\n    addition: PropTypes.shape({\n      /**\n       * 附加功能按钮\n       */\n      icon: PropTypes.string,\n      /**\n       * 附加功能点击事件\n       */\n      onClick: PropTypes.func\n    }),\n    /**\n     * 右侧功能按钮\n     */\n    action: PropTypes.shape({\n      /**\n       * 按钮类型\n       */\n      type: PropTypes.oneOf(['confirm', 'cancel', 'custom']),\n      /**\n       * 按钮文字\n       */\n      text: PropTypes.string,\n      /**\n       * 是否一直显示\n       */\n      keepShow: PropTypes.bool,\n      /**\n       * 功能按钮点击事件，默认情况下，点击时，`actionType`为`confirm`时会额外触发`onConfirm`事件，为`cancel`时会额外触发`onCancel`事件\n       */\n      onClick: PropTypes.func\n    })\n  };\n  constructor(props) {\n    super(props);\n    const value = props.value || '';\n    this.state = {\n      value,\n      focus: false\n    };\n  }\n  componentWillReceiveProps(nextProps) {\n    if ('value' in nextProps && nextProps.value !== this.state.value) {\n      this.setState({\n        value: nextProps.value\n      });\n    }\n  }\n  actionSize = 0;\n  componentDidMount() {\n    this.componentDidUpdate();\n  }\n  componentDidUpdate() {\n    if (this.actionRef && this.actionRef.current) {\n      let { action } = this.props;\n      action = Object.assign({}, actionDefault[action.type], action);\n      const { focus } = this.state;\n      if (!action.keepShow && !focus) {\n        const $actionBtn = this.actionRef.current;\n        const actionStyle = window.getComputedStyle($actionBtn);\n        const actionSize =\n          $actionBtn.offsetWidth + parseInt(actionStyle.marginLeft, 10);\n        $actionBtn.style = `margin-right: ${-1 * actionSize}px`;\n        this.actionSize = actionSize;\n      }\n    }\n  }\n  onBlurTimeout;\n  componentWillUnmount() {\n    if (this.onBlurTimeout) {\n      clearNextFrameAction(this.onBlurTimeout);\n      this.onBlurTimeout = null;\n    }\n  }\n  clear = () => {\n    if (!('value' in this.props)) {\n      this.setState({ value: '' });\n    }\n    if (this.props.onChange) {\n      this.props.onChange('');\n    }\n  };\n  onChange = e => {\n    const value = e.target.value;\n    if (!('value' in this.props)) {\n      this.setState({ value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(value);\n    }\n  };\n  onConfirm = e => {\n    e && e.preventDefault();\n    let val = '';\n     if (this.inputRef && this.inputRef.current) {\n      val = this.inputRef.current.value;\n    } else {\n      val = this.state.value;\n    }\n    this.props.onConfirm && this.props.onConfirm(val);\n  };\n  onCancel = () => {\n    if (this.props.onCancel) {\n      this.props.onCancel(this.state.value || '');\n    } else {\n      this.clear();\n    }\n  };\n  onFocus = () => {\n    this.setState({\n      focus: true\n    });\n  };\n  onBlur = () => {\n    this.onBlurTimeout = onNextFrame(() => {\n      if (!this.blurFromOnClear) {\n        if (document.activeElement !== this.inputRef) {\n          this.setState({\n            focus: false\n          });\n        }\n      }\n      this.blurFromOnClear = false;\n    });\n  };\n  focus = () => {\n    if (this.inputRef && this.inputRef.current) {\n      this.inputRef.current.focus();\n    }\n  };\n  inputRef = createRef();\n  actionRef = createRef();\n  formRef = createRef();\n  render(\n    { prefix, className, placeholder, maxLength, action, leftIcon, ...restProps },\n    { value, focus }\n  ) {\n    let isBtnHide = false;\n    if (action) {\n      action = Object.assign({}, actionDefault[action.type], action);\n      isBtnHide = !action.keepShow && !focus;\n    }\n    return (\n      <form\n        className={cx(prefix, className)}\n        onSubmit={this.onConfirm}\n        {...restProps}\n      >\n        <div className={`${prefix}-input`}>\n          <Icon icon={leftIcon} />\n          <input\n            type=\"search\"\n            placeholder={placeholder}\n            value={value}\n            maxLength={maxLength}\n            onChange={this.onChange}\n            onFocus={this.onFocus}\n            onBlur={this.onBlur}\n            ref={this.inputRef}\n          />\n        </div>\n        {!!action && (\n          <div\n            className={cx(`${prefix}-action`, {\n              [`${prefix}-action__hide`]: isBtnHide\n            })}\n            onClick={() => {\n              if (action.type === 'cancel') {\n                this.onCancel()\n              } else if (action.type === 'confirm') {\n                this.onConfirm();\n              }\n              action.onClick();\n            }}\n            style={{ marginRight: isBtnHide ? `${this.actionSize * -1}px` : 0 }}\n            ref={this.actionRef}\n          >\n            {action.text}\n          </div>\n        )}\n      </form>\n    );\n  }\n}\nexport default SearchBar;\n\n\n\n// WEBPACK FOOTER //\n// ../components/search-bar/index.jsx","import { SearchBar } from 'cafune';\nimport { Component } from 'preact';\nexport default class SearchBarComp extends Component {\n  state = {\n    val: '关键词'\n  };\n  focusInput = () => {\n    this.inpRef.focus();\n  };\n  render({}, { val }) {\n    return (\n      <div>\n        <div>\n          <p class=\"caf-demo-title\">默认用法</p>\n          <SearchBar placeholder=\"请输入关键词\" />\n        </div>\n        <div>\n          <p class=\"caf-demo-title\">自定义值</p>\n          <SearchBar\n            placeholder=\"请输入关键词\"\n            value={val}\n            onChange={val => this.setState({ val })}\n          />\n        </div>\n        <div>\n          <p class=\"caf-demo-title\">设置回调</p>\n          <SearchBar\n            placeholder=\"请输入关键词\"\n            onConfirm={val => alert(`确认，输入值为${val}`)}\n            onChange={val => console.log(val)}\n          />\n        </div>\n        <div>\n          <p class=\"caf-demo-title\">定义右侧按钮</p>\n          <SearchBar\n            placeholder=\"请输入关键词\"\n            onConfirm={() => alert('确认')}\n            onCancel={() => alert('取消')}\n            action={{\n              type: 'cancel',\n              onClick() {\n                console.log('action cancel');\n              }\n            }}\n          />\n          <SearchBar\n            placeholder=\"请输入关键词\"\n            onConfirm={val => alert(val)}\n            onCancel={() => alert('取消')}\n            action={{\n              type: 'confirm',\n              onClick() {\n                console.log('action confirm');\n              }\n            }}\n          />\n          <SearchBar\n            placeholder=\"请输入关键词\"\n            onConfirm={() => alert('确认')}\n            onCancel={() => alert('取消')}\n            action={{\n              type: 'custom',\n              text: '试试手气',\n              keepShow: false,\n              onClick() {\n                alert('试试手气');\n              }\n            }}\n          />\n        </div>\n        <div>\n          <p class=\"caf-demo-title\" onClick={this.focusInput}>\n            点击聚焦\n          </p>\n          <SearchBar placeholder=\"请输入关键词\" ref={c => (this.inpRef = c)} />\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pages/components/search-bar/index.js"],"sourceRoot":""}