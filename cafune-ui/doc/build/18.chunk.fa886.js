webpackJsonp([18],{gATp:function(t,e,n){"use strict";function o(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){return t>e&&t>m?"horizontal":e>t&&e>m?"vertical":""}function a(t,e){t.style.transform="translate3d(0, "+e+"px, 0)",t.style.msTransform="translate3d(0, "+e+"px, 0)",t.style.MozTransform="translate3d(0, "+e+"px, 0)",t.style.webkitTransform="translate3d(0, "+e+"px, 0)"}function c(){return document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop}function u(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var p,d,v=n("EBst"),y=n("9qb7"),b=n.n(y),g=(n("5D9O"),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),m=10,O=(d=p=function(t){function e(){for(var e,n,o,s=arguments.length,a=Array(s),c=0;c<s;c++)a[c]=arguments[c];return e=n=r(this,t.call.apply(t,[this].concat(a))),n.state={status:"normal",height:0},n.pullrefresh=Object(v.createRef)(),n.pullrefresh_loading=Object(v.createRef)(),n.headHeight=50,n.touchStart=function(t){n.resetTouchStatus(),n.startX=t.touches[0].clientX,n.startY=t.touches[0].clientY},n.touchMove=function(t){var e=t.touches[0];n.deltaX=e.clientX-n.startX,n.deltaY=e.clientY-n.startY,n.offsetX=Math.abs(n.deltaX),n.offsetY=Math.abs(n.deltaY),n.direction=n.direction||i(n.offsetX,n.offsetY)},n.resetTouchStatus=function(){n.direction="",n.deltaX=0,n.deltaY=0,n.offsetX=0,n.offsetY=0},n.onTouchStart=function(t){!n.untouchable()&&n.getCeiling()&&n.touchStart(t)},n.onTouchMove=function(t){n.untouchable()||(n.touchMove(t),!n.ceiling&&n.getCeiling()&&(n.startY=t.touches[0].clientY,n.deltaY=0),n.ceiling&&n.deltaY>=0&&"vertical"===n.direction&&(n.setStatus(n.ease(n.deltaY)),t.cancelable&&t.preventDefault()))},n.onTouchEnd=function(){!n.untouchable()&&n.ceiling&&n.deltaY&&("loosing"===n.state.status?(n.props.onRefresh&&n.props.onRefresh(),n.setStatus(n.headHeight,!0)):n.setStatus(0))},o=e,r(n,o)}return s(e,t),e.prototype.componentDidMount=function(){if(this.pullrefresh){var t=this.pullrefresh.current;t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchEnd,!1)}},e.prototype.componentWillUnmount=function(){if(this.pullrefresh){var t=this.pullrefresh.current;t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchEnd,!1)}},e.prototype.untouchable=function(){return"loading"===this.state.status||"success"===this.state.status||this.props.disabled},e.prototype.getCeiling=function(){return this.ceiling=0===c()},e.prototype.componentWillReceiveProps=function(t){t.loading?this.setStatus(t.loading?this.headHeight:0,t.loading):this.setStatus(0)},e.prototype.ease=function(t){var e=this.headHeight;return t<e?t:t<2*e?Math.round(e+(t-e)/2):t>1.5*e?1.5*e:Math.round(1.5*e+(t-2*e)/4)},e.prototype.setStatus=function(t,e){a(this.pullrefresh_loading.current,t);var n=e?"loading":0===t?"normal":t<this.headHeight?"pulling":"loosing";n!==this.state.status&&this.setState({status:n})},e.prototype.render=function(t){var e=t.prefix,n=t.className,r=t.children,s=o(t,["prefix","className","children"]);return Object(v.h)("div",g({className:b()(e,n),ref:this.pullrefresh},s),Object(v.h)("span",{className:e+"-loading",ref:this.pullrefresh_loading}),r)},e}(v.Component),p.defaultProps={prefix:"caf-pullref"},d),T=O;n.d(e,"default",function(){return E});var E=function(t){function e(){var n,o,r;l(this,e);for(var s=arguments.length,i=Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=o=h(this,t.call.apply(t,[this].concat(i))),o.state={count:1,loading:!1},o.onRefresh=function(){setTimeout(function(){console.log("刷新成功"),o.setState({loading:!1,count:o.state.count+1})},2e3)},r=n,h(o,r)}return f(e,t),e.prototype.render=function(t,e){var n=e.loading,o=e.count;return u(t),Object(v.h)(T,{loading:n,onRefresh:this.onRefresh},Object(v.h)("div",{class:"caf-demo-block",style:"min-height: 500px;"},"count: ",o))},e}(v.Component)}});