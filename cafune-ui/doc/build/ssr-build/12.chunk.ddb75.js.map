{"version":3,"sources":["webpack:///../components/swiper/item.jsx","webpack:///../components/swiper/index.jsx","webpack:///./pages/components/swiper/index.js"],"names":["SwiperItem","render","prefix","className","children","width","restProps","cx","Component","displayName","defaultProps","checkIfItem","el","nodeName","Swiper","state","current","props","initialIndex","total","size","swiperCurrent","resize","container","swiperContainer","getBoundingClientRect","rect","swiperList","style","swiperData","length","isSwiping","offsetX","onSwiperClick","e","preventDefault","stopPropagation","readyMoving","startTimeStamp","Date","now","clearAutoPlay","touch","getTouch","startX","clientX","startMoving","deltaX","Math","abs","direction","moveTo","offset","endMoving","inBound","ind","setTimeout","createRef","getSwiperData","data","forEach","item","attributes","push","id","actived","content","componentDidMount","window","addEventListener","touchEventMap","down","move","up","out","autoPlay","autoPlayTimer","clearTimeout","autoplay","intervel","componentWillUnmount","removeEventListener","$swiper","undefined","transitionDuration","transform","setState","onChange","renderIndicators","Array","map","_","renderItems","onItemClick","renderSwipers","showIndicators","customIndicator","Item","SwiperComp","change","renderCustom","sliderNum"],"mappings":"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","file":"12.chunk.ddb75.js","sourcesContent":["import { Component } from 'preact';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nclass SwiperItem extends Component {\n  static displayName = 'swiperItem';\n  static propTypes = {\n    /**\n     * 自定义类名\n      */\n    prefix: PropTypes.string,\n    /**\n     * 单元宽度\n     */\n    width: PropTypes.string\n  };\n  static defaultProps = {\n    prefix: 'caf-swiper-container'\n  };\n  render({ prefix, className, children, width, ...restProps }) {\n    return (\n      <div className={cx(`${prefix}-item`, className)} style={{ width }} {...restProps}>\n        {children}\n      </div>\n    );\n  }\n}\nexport default SwiperItem;\n\n\n\n// WEBPACK FOOTER //\n// ../components/swiper/item.jsx","import { Component, createRef } from 'preact';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport Item from './item';\nimport { touchEventMap, getTouch } from '../util/event';\n\n// function checkIfIndicaotr(el) {\n//   return el.nodeName.displayName === 'SwiperIndicator';\n// }\nfunction checkIfItem(el) {\n  return el.nodeName.displayName === 'swiperItem';\n}\n\n/**\n * 轮播\n * @example\n * ```javascript\n * <Swiper\n *  initialIndex={0}\n *  showIndicators={true}\n *  autoplay={true}\n *  intervel={3000}\n *  onChange={action('handleChange')}\n * >\n *  {Array(...Array(sliderNum)).map((_, ind) => (\n *    <SwiperItem key={ind}>{ind + 1}</SwiperItem>\n *  ))}\n * </Swiper>\n * ```\n * ```\n */\nclass Swiper extends Component {\n  static SwiperItem = Item;\n  static propTypes = {\n    /**\n     * 自定义类名\n      */\n    prefix: PropTypes.string,\n    /**\n     * 是否自动切换\n     */\n    autoplay: PropTypes.bool,\n    /**\n     * 切换间隔事件（毫秒）\n     */\n    intervel: PropTypes.number,\n    /**\n     * 初始index\n     */\n    initialIndex: PropTypes.number,\n    /**\n     * 是否显示指示器\n     */\n    showIndicators: PropTypes.bool,\n    /**\n     * 切换时触发事件\n     */\n    onChange: PropTypes.func,\n    /**\n     * 自定义指示器\n     */\n    customIndicator: PropTypes.node\n  };\n  static defaultProps = {\n    autoplay: true,\n    intervel: 3000,\n    initialIndex: 0,\n    showIndicators: true\n  };\n  state = {\n    current: this.props.initialIndex\n  };\n  total = 0;\n  getSwiperData(children) {\n    const data = [];\n    children.forEach((item, ind) => {\n      if (item && checkIfItem(item)) {\n        const props = item.attributes;\n        const { className } = props;\n        const { children } = item;\n        data.push({\n          id: ind,\n          actived: ind === this.state.current,\n          content: children,\n          className\n        });\n      }\n    });\n    return data;\n  }\n  autoPlayTimer;\n  size = 0;\n  swiperCurrent = 0;\n  resize = () => {\n    const container = this.swiperContainer.current;\n    if (container) {\n      const size = container.getBoundingClientRect();\n      this.size = size.width;\n    }\n    const rect = this.swiperList.current;\n    if (rect) {\n      rect.style.width = `${this.size * this.swiperData.length}px`;\n    }\n  };\n  componentDidMount() {\n    this.resize();\n    window.addEventListener('resize', this.resize);\n    const rect = this.swiperList.current;\n    if (rect) {\n      rect.addEventListener('click', this.onSwiperClick, true);\n      rect.addEventListener(touchEventMap.down, this.readyMoving);\n      rect.addEventListener(touchEventMap.move, this.startMoving);\n      rect.addEventListener(touchEventMap.up, this.endMoving);\n      rect.addEventListener(touchEventMap.out, this.endMoving);\n    }\n    this.moveTo({ ind: this.state.current });\n    this.autoPlay();\n  }\n  clearAutoPlay() {\n    this.autoPlayTimer && clearTimeout(this.autoPlayTimer);\n  }\n  autoPlay() {\n    const { autoplay, intervel } = this.props;\n    if (autoplay && this.swiperData.length > 1) {\n      this.clearAutoPlay();\n      this.autoPlayTimer = setTimeout(() => {\n        this.swiperCurrent = this.state.current + 1;\n        let { current } = this.state;\n        current = current === this.swiperData.length - 1 ? 0 : current + 1;\n        this.moveTo({ ind: current });\n      }, intervel);\n    }\n  }\n  componentWillUnmount() {\n    this.clearAutoPlay();\n    const rect = this.swiperList.current;\n    if (rect) {\n      rect.removeEventListener('click', this.onSwiperClick, true);\n      rect.removeEventListener(touchEventMap.down, this.readyMoving);\n      rect.removeEventListener(touchEventMap.move, this.startMoving);\n      rect.removeEventListener(touchEventMap.up, this.endMoving);\n      rect.removeEventListener(touchEventMap.out, this.endMoving);\n    }\n\n    window.removeEventListener('resize', this.resize);\n  }\n  moveTo({ ind, offset }) {\n    this.clearAutoPlay();\n    if (this.swiperList && this.swiperList.current) {\n      const $swiper = this.swiperList.current;\n      if (ind !== undefined) {\n        $swiper.style.transitionDuration = '500ms';\n        $swiper.style.transform = `translate3d(${ind *\n          (1 / this.total) *\n          -100}%, 0, 0 )`;\n        this.setState(\n          {\n            current: ind\n          },\n          () => {\n            this.autoPlay();\n            this.props.onChange && this.props.onChange(ind);\n          }\n        );\n      } else if (offset) {\n        // 在拖动时不要过渡时间，否则卡顿\n        $swiper.style.transitionDuration = '0ms';\n        $swiper.style.transform = `translate3d(${offset}, 0, 0 )`;\n      }\n    }\n  }\n  isSwiping = false;\n  startX;\n  deltaX;\n  offsetX = 0;\n  direction;\n  onSwiperClick = e => {\n    if (this.offsetX > 0) {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  };\n  readyMoving = e => {\n    this.startTimeStamp = Date.now();\n    this.clearAutoPlay();\n    this.isSwiping = true;\n    const touch = getTouch(e);\n    this.startX = touch.clientX;\n  };\n  startMoving = e => {\n    if (!this.isSwiping) return;\n    const touch = getTouch(e);\n    this.deltaX = touch.clientX - this.startX;\n    this.offsetX = Math.abs(this.deltaX);\n    this.direction = this.deltaX >= 0 ? -1 : 1;\n    e.preventDefault();\n    e.stopPropagation();\n    this.moveTo({\n      offset: `${this.state.current * this.size * -1 + this.deltaX}px`\n    });\n  };\n  endMoving = () => {\n    if (!this.isSwiping) return;\n    this.isSwiping = false;\n    // 是否已经在第一或最后一张\n    const inBound =\n      this.state.current + this.direction >= 0 &&\n      this.state.current + this.direction < this.swiperData.length;\n    if (this.offsetX < this.size / 4 || !inBound) {\n      this.moveTo({ ind: this.state.current });\n    } else if (inBound) {\n      this.moveTo({ ind: this.state.current + this.direction });\n    }\n    setTimeout(() => (this.offsetX = 0), 500);\n  };\n  renderIndicators(data) {\n    return data && data.length > 1\n      ? Array(...Array(data.length)).map((_, ind) => (\n          <span\n            key={ind}\n            className=\"caf-swiper-indicator-item\"\n            data-status={ind === this.state.current ? 1 : 0}\n            onClick={() => this.moveTo({ ind })}\n          />\n        ))\n      : null;\n  }\n  renderItems(data) {\n    if (data && data.length) {\n      return data.map(item => {\n        return (\n          <Item\n            key={item.id}\n            onItemClick={this.onItemClick}\n            actived={item.actived}\n            width={`${(1 / data.length) * 100}%`}\n          >\n            {item.content}\n          </Item>\n        );\n      });\n    }\n  }\n  swiperData;\n  swiperList = createRef();\n  swiperContainer = createRef();\n  renderSwipers() {\n    const { prefix, children, className, showIndicators, customIndicator, ...restProps } = this.props;\n    if (children && children.length) {\n      const swiperData = this.getSwiperData(children);\n      this.swiperData = swiperData;\n      this.total = swiperData.length;\n      return (\n        <div className={cx(prefix, className)} ref={this.swiperContainer} {...restProps}>\n          <div className={`${prefix}-container`} ref={this.swiperList}>\n            {this.renderItems(swiperData)}\n          </div>\n          {customIndicator\n            ? customIndicator\n            : showIndicators && (\n                <div className={`${prefix}-indicator`}>\n                  {this.renderIndicators(swiperData)}\n                </div>\n              )}\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n  render() {\n    return this.renderSwipers();\n  }\n}\nexport default Swiper;\n\n\n\n// WEBPACK FOOTER //\n// ../components/swiper/index.jsx","import { Swiper } from 'cafune';\nimport { Component } from 'preact';\nconst { SwiperItem } = Swiper;\n\nexport default class SwiperComp extends Component {\n  state = {\n    current: 1\n  };\n  renderCustom() {\n    const { current } = this.state;\n    return (\n      <div style=\"padding: 4px 10px;position: absolute;right: 10px;bottom:10px;background: rgba(0,0,0, .6);color: #fff;font-size:12px;\">\n        {current + 1}/4\n      </div>\n    );\n  }\n  change = ind => {\n    this.setState({\n      current: ind\n    });\n  };\n  render() {\n    const sliderNum = 4;\n    return (\n      <div class=\"\">\n        <p>默认</p>\n        <Swiper\n          initialIndex={0}\n          showIndicators={true}\n          autoplay={true}\n          intervel={3000}\n        >\n          {Array(...Array(sliderNum)).map((_, ind) => (\n            <SwiperItem key={ind}>\n              <div style=\"height: 80px;text-align:center;line-height: 80px;\">\n                {ind + 1}\n              </div>\n            </SwiperItem>\n          ))}\n        </Swiper>\n        <p>自定义指示器</p>\n        <Swiper onChange={this.change} customIndicator={this.renderCustom()}>\n          {Array(...Array(4)).map((_, ind) => (\n            <SwiperItem key={ind}>\n              <div style=\"height: 80px;text-align:center;line-height: 80px;\">\n                {ind + 1}\n              </div>\n            </SwiperItem>\n          ))}\n        </Swiper>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pages/components/swiper/index.js"],"sourceRoot":""}