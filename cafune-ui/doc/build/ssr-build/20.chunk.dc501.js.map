{"version":3,"sources":["webpack:///../components/collapse/item.jsx","webpack:///../components/collapse/index.jsx","webpack:///./pages/components/collapse/index.js"],"names":["Item","contentRef","createRef","contentWrapRef","onToggle","props","id","disabled","updateStyle","style","actived","current","offsetHeight","componentDidUpdate","componentDidMount","render","prefix","className","children","title","icon","restProps","cx","defaultProps","Component","displayName","propType","PropType","oneOfType","string","node","isRequired","bool","checkIfItem","el","nodeName","Collapse","state","actives","Array","isArray","idInd","indexOf","push","splice","setState","renderContent","data","panels","length","map","item","content","getListData","accordion","console","error","forEach","attributes","renderList","listData","CollapseItem","CollapseCom","activeCol","onChange","name"],"mappings":"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","file":"20.chunk.dc501.js","sourcesContent":["import { Component, createRef } from 'preact';\nimport PropType from 'prop-types';\nimport cx from 'classnames';\nimport Cell from '../cell';\n// import Icon from '../icon';\n\n/**\n * 折叠面板子项\n */\nclass Item extends Component {\n  static displayName = 'CollapseItem';\n  static defaultProps = {\n    prefix: 'caf-collapse',\n    icon: 'arrow_right',\n    disabled: false\n  };\n  static propType = {\n    /**\n     * 标题\n     */\n    title: PropType.oneOfType([PropType.string, PropType.node]).isRequired,\n    /**\n     * 自定义前缀\n     */\n    prefix: PropType.string,\n    /**\n     * 是否处于激活状态\n     */\n    actived: PropType.bool,\n    /**\n     * 是否禁用此单元\n     */\n    disabled: PropType.bool,\n     /**\n     * 右侧按钮\n     */\n    icon: PropType.string\n  };\n  contentRef = createRef();\n  contentWrapRef = createRef();\n  onToggle = () => {\n    const { id, disabled, onToggle } = this.props;\n    if (!disabled) {\n      onToggle(id);\n    }\n  };\n  updateStyle() {\n    let style = '';\n    const { actived } = this.props;\n    /* istanbul ignore if  */\n    if (this.contentWrapRef.current && this.contentRef.current) {\n      style = `max-height: ${\n        actived ? this.contentWrapRef.current.offsetHeight : 0\n      }px`;\n      this.contentRef.current.style = style;\n    }\n  }\n  componentDidUpdate() {\n    this.updateStyle();\n  }\n  componentDidMount() {\n    this.updateStyle();\n  }\n  render({ prefix, className, children, title, actived, disabled, icon, ...restProps }) {\n    return (\n      <div\n        className={cx(`${prefix}-item`, className, { [`${prefix}-item__disabled`]: disabled })}\n        data-status={actived ? 1 : 0}\n        {...restProps}\n      >\n        <div className={cx(`${prefix}-header`, {[`${prefix}-header__default`]: icon === Item.defaultProps.icon })} onClick={this.onToggle}>\n          <Cell title={title} rightIcon={icon} />\n        </div>\n        <div className={`${prefix}-wrapper`} ref={this.contentRef}>\n          <div className={`${prefix}-wrapper-content`} ref={this.contentWrapRef}>\n            {children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Item;\n\n\n\n// WEBPACK FOOTER //\n// ../components/collapse/item.jsx","import { Component } from \"preact\";\nimport PropType from 'prop-types';\nimport cx from 'classnames';\nimport Item from \"./item\";\n\nfunction checkIfItem(el) {\n  return el.nodeName.displayName === \"CollapseItem\";\n}\n\n/**\n * 折叠面板\n * @example\n * ```javascript\n * const CollapseItem = Collapse.Item;\n * // ...\n * <Collapse actives={activeCol} onChange={this.onChange}>\n *  <CollapseItem title=\"标题1\" id=\"a\">\n *    内容1\n *  </CollapseItem>\n *  <CollapseItem title=\"标题2\" id=\"b\">\n *    内容2\n *  </CollapseItem>\n *  <CollapseItem title=\"标题3\" id=\"c\" disabled>\n *    内容3\n *  </CollapseItem>\n * </Collapse>\n * ```\n */\nclass Collapse extends Component {\n  static Item = Item;\n  state = {\n    actives: this.props.actives\n  };\n  static defaultProps = {\n    accordion: false,\n    prefix: \"caf-collapse\"\n  };\n  static propType = {\n    /**\n     * 是否开启手风琴效果\n      */\n    accordion: PropType.bool,\n    /**\n     * 自定义前缀\n      */\n    prefix: PropType.string,\n  }\n  onToggle = id => {\n    let { actives } = this.state;\n    if (Array.isArray(actives)) {\n      const idInd = actives.indexOf(id);\n      if (idInd === -1) {\n        actives.push(id);\n      } else {\n        actives.splice(idInd, 1);\n      }\n    } else {\n      actives = actives === id ? '' : id;\n    }\n    this.setState({\n      actives\n    });\n  };\n  renderContent(data) {\n    let panels = [];\n    if (data && data.length) {\n      panels = data.map(item => (\n        <Item {...item} onToggle={this.onToggle}>\n          {item.content}\n        </Item>\n      ));\n      return panels;\n    }\n    return null;\n  }\n  getListData(children, actives, accordion) {\n    if (accordion) {\n      if (Array.isArray(actives)) {\n        console.error(\"actives should be a String while using accordion\");\n        return;\n      }\n    } else if (typeof actives === \"string\") {\n      actives = [actives];\n    }\n    const data = [];\n    children.forEach(item => {\n      if (checkIfItem(item)) {\n        const props = item.attributes;\n        const { id } = props;\n        const { children } = item;\n        let actived = false;\n        if (actives && id)\n          actived =\n            typeof actives === \"string\"\n              ? actives == id\n              : actives.indexOf(id) !== -1;\n        data.push({\n          actived,\n          content: children,\n          ...props\n        });\n      }\n    });\n    return data;\n  }\n  renderList() {\n    const { prefix, children, accordion, className, ...restProps } = this.props;\n    const { actives } = this.state;\n    const listData = this.getListData(children, actives, accordion);\n    return <div className={cx(prefix, className)} {...restProps}>{this.renderContent(listData)}</div>;\n  }\n  render() {\n    return this.renderList();\n  }\n}\nexport default Collapse;\n\n\n\n// WEBPACK FOOTER //\n// ../components/collapse/index.jsx","import { Collapse } from 'cafune';\nimport { Component } from 'preact';\nconst CollapseItem = Collapse.Item;\n\nexport default class CollapseCom extends Component {\n  state = {\n    actives: 'basic',\n    activeCol: []\n  };\n  onChange = name => {\n    return actives => {\n      this.setState({\n        [name]: actives\n      });\n    };\n  };\n  render({}, { actives, activeCol }) {\n    return (\n      <div class=\"\">\n        <p>默认模式</p>\n        <Collapse actives={activeCol} onChange={this.onChange('activeCol')}>\n          <CollapseItem title=\"基础组件\" id=\"basic\">\n            <div style=\"padding: 15px\">默认开启</div>\n          </CollapseItem>\n          <CollapseItem title=\"展示组件\" id=\"display\">\n            <div style=\"padding: 15px\">默认关闭</div>\n          </CollapseItem>\n        </Collapse>\n        <p>手风车效果（只开一个）</p>\n        <Collapse actives={actives} accordion>\n          <CollapseItem title=\"基础组件\" id=\"basic\">\n            <div style=\"padding: 15px\">默认开启内容</div>\n          </CollapseItem>\n          <CollapseItem title=\"展示组件\" id=\"display\">\n            <div style=\"padding: 15px\">默认关闭</div>\n          </CollapseItem>\n          <CollapseItem title=\"展示组件(禁用)\" id=\"disabled\" disabled>\n            默认关闭\n          </CollapseItem>\n        </Collapse>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pages/components/collapse/index.js"],"sourceRoot":""}