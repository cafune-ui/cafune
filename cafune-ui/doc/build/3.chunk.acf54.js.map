{"version":3,"sources":["webpack:///3.chunk.acf54.js","webpack:///../util/browser.js","webpack:///../components/lazyload/index.jsx","webpack:///./pages/components/lazyload/index.js"],"names":["webpackJsonp","WUIe","sbX7","module","__webpack_exports__","__webpack_require__","getScrollTop","bodyScrollTop","documentScrollTop","document","body","scrollTop","documentElement","getWindowHeight","compatMode","clientHeight","inViewPort","ele","offsetTop","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","lazyload__classCallCheck","instance","Constructor","lazyload__possibleConstructorReturn","lazyload__inherits","defineProperty","_class","_temp2","preact_min","Lazyload","_Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","this","apply","concat","imgsInfo","onScroll","updateLazy","lazyContainer","createRef","componentDidMount","container","current","updateImgs","window","addEventListener","componentDidUpdate","imgs","querySelectorAll","props","imgClass","i","len","dataset","src","push","dom","componentWillUnmount","removeEventListener","forEach","render","_ref","children","ref","className","Component","defaultProps","d","lazyload_LazyLoadComp","lazyload__ref","data-src","class","LazyLoadComp","lazyload","map","_","ind","key"],"mappings":"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","file":"3.chunk.acf54.js","sourcesContent":["webpackJsonp([3,29],{\n\n/***/ \"WUIe\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"sbX7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"EBst\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// CONCATENATED MODULE: ../util/browser.js\n// 文档滚动高度\nfunction getScrollTop() {\n  var scrollTop = 0;\n  var bodyScrollTop = 0;\n  var documentScrollTop = 0;\n  if (document.body) {\n    bodyScrollTop = document.body.scrollTop;\n  }\n  if (document.documentElement) {\n    documentScrollTop = document.documentElement.scrollTop;\n  }\n  scrollTop = bodyScrollTop - documentScrollTop > 0 ? bodyScrollTop : documentScrollTop;\n  return scrollTop;\n}\n\n// 文档的总高度\nfunction getScrollHeight() {\n  var scrollHeight = 0;\n  var bodyScrollHeight = 0;\n  var documentScrollHeight = 0;\n  if (document.body) {\n    bodyScrollHeight = document.body.scrollHeight;\n  }\n  if (document.documentElement) {\n    documentScrollHeight = document.documentElement.scrollHeight;\n  }\n  scrollHeight = bodyScrollHeight - documentScrollHeight > 0 ? bodyScrollHeight : documentScrollHeight;\n  return scrollHeight;\n}\n\n// 浏览器视口的高度\nfunction getWindowHeight() {\n  var windowHeight = 0;\n  if (document.compatMode == 'CSS1Compat') {\n    windowHeight = document.documentElement.clientHeight;\n  } else {\n    windowHeight = document.body.clientHeight;\n  }\n  return windowHeight;\n}\n// 元素是否在视口范围内\nfunction inViewPort(ele) {\n  return getScrollTop() + getWindowHeight() >= ele.offsetTop && ele.offsetTop >= getScrollTop();\n}\n// EXTERNAL MODULE: ../node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(\"5D9O\");\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// CONCATENATED MODULE: ../components/lazyload/index.jsx\nvar _class, _temp2;\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n/**\n * 懒加载包裹组件\n * @example\n * ```javascript\n * <Lazyload imgclassName=\"lazy\">\n * // ...\n * <img src=\"/placeholder\" data-src={originalpic} className=\"lazy\" />\n * // ...\n * </Lazyload>\n * ```\n */\nvar lazyload_Lazyload = (_temp2 = _class = function (_Component) {\n  _inherits(Lazyload, _Component);\n\n  function Lazyload() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Lazyload);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.imgsInfo = [], _this.onScroll = function () {\n      /* istanbul ignore next  */\n      _this.updateLazy();\n    }, _this.lazyContainer = Object(preact_min[\"createRef\"])(), _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Lazyload.prototype.componentDidMount = function componentDidMount() {\n    var container = this.lazyContainer.current;\n    this.container = container;\n    this.updateImgs();\n    window.addEventListener('scroll', this.onScroll);\n  };\n\n  Lazyload.prototype.componentDidUpdate = function componentDidUpdate() {\n    /* istanbul ignore next  */\n    this.updateImgs();\n  };\n\n  Lazyload.prototype.updateImgs = function updateImgs() {\n    if (this.container) {\n      var imgsInfo = [];\n      // eslint-disable-next-line prettier/prettier\n      var imgs = this.container.querySelectorAll('.' + this.props.imgClass) || [];\n      for (var i = 0, len = imgs.length; i < len; i += 1) {\n        var ele = imgs[i];\n        if (ele.dataset.src !== ele.src) {\n          imgsInfo.push({\n            dom: ele,\n            src: ele.dataset.src\n          });\n        }\n      }\n      this.imgsInfo = imgsInfo;\n      this.updateLazy();\n    }\n  };\n\n  Lazyload.prototype.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('scroll', this.onScroll);\n  };\n\n  Lazyload.prototype.updateLazy = function updateLazy() {\n    var imgsInfo = this.imgsInfo;\n\n    imgsInfo.forEach(function (ele) {\n      /* istanbul ignore else */\n      if (ele.dom.src !== ele.src && inViewPort(ele.dom)) {\n        ele.dom.src = ele.src;\n      }\n    });\n  };\n\n  Lazyload.prototype.render = function render(_ref) {\n    var children = _ref.children;\n\n    return Object(preact_min[\"h\"])(\n      'div',\n      { ref: this.lazyContainer, className: 'caf-lazyload' },\n      children\n    );\n  };\n\n  return Lazyload;\n}(preact_min[\"Component\"]), _class.defaultProps = {\n  imgClass: 'lazyImg'\n}, _temp2);\n\n\n/* harmony default export */ var lazyload = (lazyload_Lazyload);\n// EXTERNAL MODULE: ./pages/components/lazyload/style.scss\nvar style = __webpack_require__(\"WUIe\");\nvar style_default = /*#__PURE__*/__webpack_require__.n(style);\n\n// CONCATENATED MODULE: ./pages/components/lazyload/index.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return lazyload_LazyLoadComp; });\n\n\n\nfunction lazyload__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction lazyload__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction lazyload__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar lazyload__ref = Object(preact_min[\"h\"])('img', {\n  src: 'https://via.placeholder.com/200x150.png?text=playholder',\n  'data-src': 'https://via.placeholder.com/200x150.png?text=original',\n  'class': 'lazy'\n});\n\nvar lazyload_LazyLoadComp = function (_Component) {\n  lazyload__inherits(LazyLoadComp, _Component);\n\n  function LazyLoadComp() {\n    lazyload__classCallCheck(this, LazyLoadComp);\n\n    return lazyload__possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  LazyLoadComp.prototype.render = function render() {\n    return Object(preact_min[\"h\"])(\n      lazyload,\n      { imgClass: 'lazy' },\n      Array.apply(undefined, Array(20)).map(function (_, ind) {\n        return Object(preact_min[\"h\"])(\n          'div',\n          { 'class': 'caf-demo-image', key: ind },\n          lazyload__ref\n        );\n      })\n    );\n  };\n\n  return LazyLoadComp;\n}(preact_min[\"Component\"]);\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 3.chunk.acf54.js","// 文档滚动高度\nexport function getScrollTop() {\n  let scrollTop = 0;\n  let bodyScrollTop = 0;\n  let documentScrollTop = 0;\n  if (document.body) {\n    bodyScrollTop = document.body.scrollTop;\n  }\n  if (document.documentElement) {\n    documentScrollTop = document.documentElement.scrollTop;\n  }\n  scrollTop =\n    bodyScrollTop - documentScrollTop > 0 ? bodyScrollTop : documentScrollTop;\n  return scrollTop;\n}\n\n// 文档的总高度\nexport function getScrollHeight() {\n  let scrollHeight = 0;\n  let bodyScrollHeight = 0;\n  let documentScrollHeight = 0;\n  if (document.body) {\n    bodyScrollHeight = document.body.scrollHeight;\n  }\n  if (document.documentElement) {\n    documentScrollHeight = document.documentElement.scrollHeight;\n  }\n  scrollHeight =\n    bodyScrollHeight - documentScrollHeight > 0\n      ? bodyScrollHeight\n      : documentScrollHeight;\n  return scrollHeight;\n}\n\n// 浏览器视口的高度\nexport function getWindowHeight() {\n  let windowHeight = 0;\n  if (document.compatMode == 'CSS1Compat') {\n    windowHeight = document.documentElement.clientHeight;\n  } else {\n    windowHeight = document.body.clientHeight;\n  }\n  return windowHeight;\n}\n// 元素是否在视口范围内\nexport function inViewPort(ele) {\n  return (\n    getScrollTop() + getWindowHeight() >= ele.offsetTop &&\n    ele.offsetTop >= getScrollTop()\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ../util/browser.js","import { Component, createRef } from 'preact';\nimport { inViewPort } from '../../util/browser';\nimport PropTypes from 'prop-types';\n/**\n * 懒加载包裹组件\n * @example\n * ```javascript\n * <Lazyload imgclassName=\"lazy\">\n * // ...\n * <img src=\"/placeholder\" data-src={originalpic} className=\"lazy\" />\n * // ...\n * </Lazyload>\n * ```\n */\nclass Lazyload extends Component {\n  lazyLoadIns;\n  imgsInfo = [];\n  static propTypes = {\n    /**\n     * 懒加载图片类名\n     */\n    imgClass: PropTypes.string\n  };\n  static defaultProps = {\n    imgClass: 'lazyImg'\n  };\n  container;\n  componentDidMount() {\n    const container = this.lazyContainer.current;\n    this.container = container;\n    this.updateImgs();\n    window.addEventListener('scroll', this.onScroll);\n  }\n  componentDidUpdate() {\n    /* istanbul ignore next  */\n    this.updateImgs();\n  }\n  updateImgs() {\n    if (this.container) {\n      const imgsInfo = [];\n      // eslint-disable-next-line prettier/prettier\n      const imgs = this.container.querySelectorAll(`.${this.props.imgClass}`) || [];\n      for (let i = 0, len = imgs.length; i < len; i += 1) {\n        const ele = imgs[i];\n        if (ele.dataset.src !== ele.src) {\n          imgsInfo.push({\n            dom: ele,\n            src: ele.dataset.src\n          });\n        }\n      }\n      this.imgsInfo = imgsInfo;\n      this.updateLazy();\n    }\n  }\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.onScroll);\n  }\n  updateLazy() {\n    const { imgsInfo } = this;\n    imgsInfo.forEach(ele => {\n      /* istanbul ignore else */\n      if (ele.dom.src !== ele.src && inViewPort(ele.dom)) {\n        ele.dom.src = ele.src;\n      }\n    });\n  }\n  onScroll = () => {\n    /* istanbul ignore next  */\n    this.updateLazy();\n  };\n  lazyContainer = createRef();\n  render({ children }) {\n    return (\n      <div ref={this.lazyContainer} className=\"caf-lazyload\">\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default Lazyload;\n\n\n\n// WEBPACK FOOTER //\n// ../components/lazyload/index.jsx","import { Lazyload } from 'cafune';\nimport { Component } from 'preact';\nimport './style';\nexport default class LazyLoadComp extends Component {\n  render() {\n    return (\n      <Lazyload imgClass=\"lazy\">\n        {Array(...Array(20)).map((_, ind) => (\n          <div class=\"caf-demo-image\" key={ind}>\n            <img\n              src=\"https://via.placeholder.com/200x150.png?text=playholder\"\n              data-src=\"https://via.placeholder.com/200x150.png?text=original\"\n              class=\"lazy\"\n            />\n          </div>\n        ))}\n      </Lazyload>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pages/components/lazyload/index.js"],"sourceRoot":""}